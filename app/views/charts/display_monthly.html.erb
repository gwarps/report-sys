<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">

  // Load the Visualization API and the piechart package.
  google.load('visualization', '1.0', {'packages':['corechart']});

  // Set a callback to run when the Google Visualization API is loaded.
  google.setOnLoadCallback(drawChart);

  // Callback that creates and populates a data table,
  // instantiates the pie chart, passes in the data and
  // draws it.

  function drawChart(){
  //create the datatable
  var data = new google.visualization.DataTable();
  data.addColumn('string','Dates');
  data.addColumn('number', 'Lenders');

  <% k=[] %>
  <% @mon_data.each do |day| %>
    <%  k << "['#{day.dc}',#{day.count}]" %>
  <% end %>
  data.addRows([<%= k.join(',') %>]);


  //set chart options
  var options = {
  title: 'Summary Report',width:1000,height:600,
  hAxis: {title: 'Total Lenders'},
  vAxis: {title: '<%= "#{Date::MONTHNAMES[@date_str[0].to_i]} #{@date_str[1]}" %>',  titleTextStyle: {color: 'red'}}
  };

  // Instantiate and draw our chart, passing in some options.
  var chart_bar = new google.visualization.BarChart(document.getElementById('chart_div_bar'));

  //The select handler. Call the chart's getSelection() method
  function selectHandler(){
  var selectedItem = chart_bar.getSelection()[0];
  if(selectedItem){
  var value = data.getValue(selectedItem.row,selectedItem.column);
  alert('the user selected: ' + value);
  }
  }
  google.visualization.events.addListener(chart_bar,'select',selectHandler);
  chart_bar.draw(data,options);



  }
</script>



<div id ="chart_div_bar">
</div>
